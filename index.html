<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Real Estate Quotation Calculator</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f2f6ff;
    --card:#ffffffcc;
    --glass: rgba(255,255,255,0.65);
    --text:#0b1f44;
    --muted:#5c6b8a;
    --accent1:#2d7ef7;
    --accent2:#0ec2ff;
    --border: rgba(13, 35, 69, 0.08);
    --shadow: 0 10px 25px rgba(13,35,69,0.12);
    --radius:16px;
    --pad:18px;
  }
  body{margin:0;background:linear-gradient(140deg,#eaf3ff 0%,#e6f0ff 30%,#eef7ff 100%);font-family:Inter,system-ui,sans-serif;color:var(--text)}
  .container{max-width:860px;margin:24px auto 80px;padding:0 16px}
  .card{background:var(--glass);backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px); border:1px solid var(--border); border-radius:var(--radius);box-shadow:var(--shadow);padding:var(--pad);margin:16px 0}
  .section-title{display:flex;align-items:center;gap:10px;margin:0 0 12px;font-weight:800;color:var(--text)}
  .section-title .pill{height:30px;padding:0 12px;border-radius:999px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;display:flex;align-items:center;font-size:15px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:680px){ .grid{grid-template-columns:1fr} }
  label{font-size:13px;color:var(--muted);display:block;margin:4px 0 6px}
  input[type="text"], input[type="number"]{width:100%;padding:10px;border-radius:12px;border:1px solid var(--border);background:#fff;font-size:14px}
  input::placeholder{color:#b7c1d6}
  .btnbar{display:flex;gap:12px;flex-wrap:wrap;margin:8px 0 2px}
  .btn{border:none;border-radius:12px;padding:10px 14px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:700;cursor:pointer}
  .options{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
  .chip{border:1px solid var(--border);border-radius:999px;padding:8px 12px;background:#fff;color:var(--text);cursor:pointer;font-weight:600;font-size:13px}
  .chip.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border-color:transparent}
  table{width:100%;border-collapse:separate;border-spacing:0 6px}
  th,td{padding:8px 10px;font-size:13px}
  th{background:#f6f9ff;text-align:left;color:#2b3f6e}
  td.amount, th.amount{text-align:right}
  .tight th, .tight td{padding:6px 10px}
  .note{font-size:12px;color:#7d8fb8;margin-top:6px}
</style>
</head>
<body>
<div class="container">
  <h2>Real Estate Quotation Calculator</h2>

  <!-- Project Details -->
  <section class="card">
    <div class="section-title"><span class="pill">Project Details</span></div>
    <div class="grid">
      <div><label>Project Name</label><input type="text" id="projName" placeholder="South Residences"></div>
      <div><label>Unit Area (sqm)</label><input type="text" id="unitArea" placeholder="36.53"></div>
      <div><label>View</label><input type="text" id="unitView" placeholder="Mall View"></div>
      <div><label>Unit</label><input type="text" id="unitNo" placeholder="B030916"></div>
    </div>
  </section>

  <!-- Pricing & Discounts -->
  <section class="card">
    <div class="section-title"><span class="pill">Pricing & Discounts</span></div>
    <div class="grid">
      <div><label>List Price (₱)</label><input type="number" id="listPrice" placeholder="5532000"></div>
    </div>
    <div class="grid">
      <div><label>Standard Discount (% or ₱)</label><input type="text" id="discStd" placeholder="21% or 100000"></div>
      <div><label>Special Discount (% or ₱)</label><input type="text" id="discSp" placeholder="5% or 50000"></div>
      <div><label>Additional Discount (% or ₱)</label><input type="text" id="discAdd" placeholder="1% or 20000"></div>
      <div><label>Rebate Discount (% or ₱)</label><input type="text" id="discReb" placeholder="1.5% or 30000"></div>
    </div>
    <div class="grid">
      <div><label>Other Charges (%)</label><input type="number" id="otherPct" placeholder="8.5"></div>
      <div><label>VAT (%)</label><input type="number" id="vatPct" placeholder="12"></div>
    </div>
  </section>

  <!-- Payment Terms -->
  <section class="card">
    <div class="section-title"><span class="pill">Payment Terms</span></div>
    <div class="options">
      <button class="chip active" data-opt="spread">Spread DP (Preselling)</button>
      <button class="chip" data-opt="spot">Spot DP (Cash)</button>
      <button class="chip" data-opt="split">Split (Spot + Monthly)</button>
    </div>
    <div class="grid" style="margin-top:10px">
      <div><label>Downpayment % of TAP</label><input type="number" id="dpPct" placeholder="5"></div>
      <div><label>Reservation Fee (₱)</label><input type="number" id="resFee" placeholder="30000"></div>
      <div><label>Net Downpayment (₱)</label><input type="text" id="netDp" disabled></div>
      <div><label>No. of months</label><input type="number" id="months" placeholder="12"></div>
      <div><label>Monthly Amortization (₱)</label><input type="text" id="equityMonthly" disabled></div>
    </div>
  </section>

  <!-- Bank Financing -->
  <section class="card">
    <div class="section-title"><span class="pill">Bank Financing</span></div>
    <div class="grid"><div><label>Interest Rate (annual %)</label><input type="number" id="rate" placeholder="5.5"></div></div>
  </section>

  <!-- Buttons -->
  <div class="btnbar">
    <button class="btn" id="computeBtn">Compute</button>
    <button class="btn" id="resetBtn">Reset</button>
    <button class="btn" id="pdfBtn">Save as PDF</button>
  </div>

  <!-- Quotation Summary -->
  <section class="card">
    <div class="section-title"><span class="pill">Quotation Summary</span></div>
    <table id="summaryTbl"><tbody id="sumBody"></tbody></table>
  </section>

  <!-- Bank table -->
  <section class="card">
    <div class="section-title"><span class="pill">Bank Financing</span></div>
    <table><tbody id="bankBody"></tbody></table>
    <div class="note" id="rateNote"></div>
  </section>

  <!-- Property Consultant -->
  <section class="card">
    <div class="section-title"><span class="pill">Property Consultant</span></div>
    <div class="grid">
      <div><label>Name</label><input type="text" id="pcName" placeholder="Juan Dela Cruz"></div>
      <div><label>Mobile No.</label><input type="text" id="pcMobile" placeholder="0917-xxx-xxxx"></div>
      <div><label>Position</label><input type="text" id="pcPos" placeholder="Property Consultant"></div>
    </div>
    <div class="note" id="genNote"></div>
  </section>
</div>

<script>
const peso = n => (isNaN(n)?0:n).toLocaleString('en-PH',{minimumFractionDigits:2, maximumFractionDigits:2});
function parseDiscount(str, base){if(!str) return 0;str=str.trim();if(str.endsWith('%')) return base*parseFloat(str)/100;return parseFloat(str)||0;}
let payOpt="spread";document.querySelectorAll(".chip").forEach(c=>c.onclick=()=>{document.querySelectorAll(".chip").forEach(x=>x.classList.remove("active"));c.classList.add("active");payOpt=c.dataset.opt;});
function computeAll(){
  const list=+document.getElementById("listPrice").value||0;
  const dStd=parseDiscount(document.getElementById("discStd").value,list);
  const dSp=parseDiscount(document.getElementById("discSp").value,list);
  const dAdd=parseDiscount(document.getElementById("discAdd").value,list);
  const dReb=parseDiscount(document.getElementById("discReb").value,list);
  const totalDisc=dStd+dSp+dAdd+dReb;
  const nlp=list-totalDisc;
  const other=nlp*((+document.getElementById("otherPct").value||0)/100);
  let vat=0,vatPct=+document.getElementById("vatPct").value||0;if(nlp>3600000) vat=nlp*vatPct/100;
  const tap=nlp+other+vat;
  const dpPct=(+document.getElementById("dpPct").value||0)/100;const dp=tap*dpPct;const rf=+document.getElementById("resFee").value||0;const net=dp-rf;const months=+document.getElementById("months").value||0;
  document.getElementById("netDp").value=peso(net);document.getElementById("equityMonthly").value=months?peso(net/months):"0.00";
  const rem=tap-dp;
  const body=document.getElementById("sumBody");body.innerHTML="";
  // Project Details first
  [["Project Name",document.getElementById("projName").value],["Unit Area",document.getElementById("unitArea").value],["View",document.getElementById("unitView").value],["Unit",document.getElementById("unitNo").value]].forEach(r=>{if(r[1]){let tr=document.createElement("tr");tr.innerHTML=`<td>${r[0]}</td><td>${r[1]}</td>`;body.appendChild(tr);}});
  // computations
  let addRow=(p,l,a)=>{if(Math.abs(a)>0.001){let tr=document.createElement("tr");tr.innerHTML=`<td>${p}</td><td>${l}</td><td class='amount'>${peso(a)}</td>`;body.appendChild(tr);}};
  addRow("","List Price",list);
  addRow("","Total Discounts",-totalDisc);
  addRow("","Net List Price",nlp);
  addRow((+document.getElementById("otherPct").value||0)+"%","Other Charges",other);
  addRow(nlp>3600000?vatPct+"%":"","VAT",vat);
  addRow("","Total Amount Payable (TAP)",tap);
  addRow("","Downpayment",-dp);
  addRow("","Reservation Fee",-rf);
  addRow("","Net Downpayment",-net);
  if(months) addRow("","Monthly Amortization ("+months+" mos)",-(net/months));
  const rate=+document.getElementById("rate").value||0;
  const bankBody=document.getElementById("bankBody");bankBody.innerHTML="";let amort=(P,r,y)=>{let i=r/100/12,n=y*12;if(!i)return P/n;return P*(i*Math.pow(1+i,n))/(Math.pow(1+i,n)-1)};
  let tr=document.createElement("tr");tr.innerHTML=`<td>Loanable Amount</td><td class='amount'>${peso(rem)}</td>`;bankBody.appendChild(tr);
  [5,10,15,20].forEach(y=>{let tr=document.createElement("tr");tr.innerHTML=`<td>${y} yrs</td><td class='amount'>${peso(amort(rem,rate,y))}</td>`;bankBody.appendChild(tr)});
  document.getElementById("rateNote").textContent=`Based on ${rate}% annual interest.`;
  document.getElementById("genNote").textContent="Generated "+new Date().toLocaleString();
}
document.getElementById("computeBtn").onclick=computeAll;
document.getElementById("resetBtn").onclick=()=>location.reload();
document.getElementById("pdfBtn").onclick=()=>window.print();
</script>
</body>
</html>
