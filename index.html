<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Automated Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { color: #0B5AA0; }
    label { display: block; margin-top: 10px; }
    input { padding: 5px; width: 200px; }
    button { margin-top: 20px; padding: 8px 16px; }
    table { border-collapse: collapse; margin-top: 20px; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
    th { background: #f2f2f2; }
    td:first-child { text-align: left; }
  </style>
</head>
<body>
  <h2>Automated Calculator</h2>

  <!-- Inputs -->
  <label>Selling Price: <input type="number" id="sellingPrice" oninput="compute()"></label>
  <label>Standard Discount: <input type="number" id="standardDiscount" oninput="compute()"></label>
  <label>Special Discount: <input type="number" id="specialDiscount" oninput="compute()"></label>
  <label>Additional Discount: <input type="number" id="additionalDiscount" oninput="compute()"></label>
  <label>Rebate Discount: <input type="number" id="rebateDiscount" oninput="compute()"></label>
  <label>Other Charges (%): <input type="number" id="otherCharges" oninput="compute()"></label>
  <label>VAT (%): <input type="number" id="vat" oninput="compute()"></label>
  <label>Downpayment (%): <input type="number" id="downpayment" oninput="compute()"></label>
  <label>Reservation Fee: <input type="number" id="reservation" oninput="compute()"></label>

  <!-- Bank Financing -->
  <h3>Bank Financing</h3>
  <label>Interest Rate (% per year): <input type="number" id="interestRate" value="6.5" oninput="compute()"></label>
  <label>Loan Tenor (years): <input type="number" id="tenor" value="10" oninput="compute()"></label>

  <!-- Print / Save -->
  <button onclick="window.print()">Print / Save as PDF</button>

  <!-- Results -->
  <table>
    <tbody id="results"></tbody>
  </table>

  <script>
    function peso(val) {
      return "â‚±" + (val ? val.toLocaleString('en-PH', {minimumFractionDigits:2, maximumFractionDigits:2}) : "0.00");
    }

    function compute() {
      const selling = parseFloat(document.getElementById('sellingPrice').value) || 0;
      const stdDisc = parseFloat(document.getElementById('standardDiscount').value) || 0;
      const spcDisc = parseFloat(document.getElementById('specialDiscount').value) || 0;
      const addDisc = parseFloat(document.getElementById('additionalDiscount').value) || 0;
      const rebDisc = parseFloat(document.getElementById('rebateDiscount').value) || 0;
      const otherPct = (parseFloat(document.getElementById('otherCharges').value) || 0) / 100;
      const vatPct = (parseFloat(document.getElementById('vat').value) || 0) / 100;
      const dpPct = (parseFloat(document.getElementById('downpayment').value) || 0) / 100;
      const reservation = parseFloat(document.getElementById('reservation').value) || 0;

      const totalDiscount = stdDisc + spcDisc + addDisc + rebDisc;
      const discountedPrice = selling - totalDiscount;
      const otherCharges = discountedPrice * otherPct;
      const vat = discountedPrice * vatPct;
      const totalPayable = discountedPrice + otherCharges + vat;

      const downpayment = totalPayable * dpPct;
      const netDownpayment = downpayment - reservation;
      const balance = totalPayable - downpayment;

      // Bank Financing
      const annualRate = (parseFloat(document.getElementById('interestRate').value) || 0) / 100;
      const years = parseFloat(document.getElementById('tenor').value) || 0;
      const months = years * 12;
      const monthlyRate = annualRate / 12;
      let monthlyAmort = 0;
      if (annualRate > 0 && years > 0) {
        monthlyAmort = balance * (monthlyRate * Math.pow(1+monthlyRate, months)) / (Math.pow(1+monthlyRate, months) - 1);
      }

      // Display
      document.getElementById('results').innerHTML = `
        <tr><td>Selling Price</td><td>${peso(selling)}</td></tr>
        <tr><td>Standard Discount</td><td>- ${peso(stdDisc)}</td></tr>
        <tr><td>Special Discount</td><td>- ${peso(spcDisc)}</td></tr>
        <tr><td>Additional Discount</td><td>- ${peso(addDisc)}</td></tr>
        <tr><td>Rebate Discount</td><td>- ${peso(rebDisc)}</td></tr>
        <tr><td><b>Discounted Price</b></td><td><b>${peso(discountedPrice)}</b></td></tr>
        <tr><td>Other Charges</td><td>${peso(otherCharges)}</td></tr>
        <tr><td>VAT</td><td>${peso(vat)}</td></tr>
        <tr><td><b>Total Amount Payable</b></td><td><b>${peso(totalPayable)}</b></td></tr>
        <tr><td>Downpayment</td><td>${peso(downpayment)}</td></tr>
        <tr><td>Less Reservation Fee</td><td>- ${peso(reservation)}</td></tr>
        <tr><td><b>Net Downpayment</b></td><td><b>${peso(netDownpayment)}</b></td></tr>
        <tr><td>Remaining Balance</td><td>${peso(balance)}</td></tr>
        <tr><td><b>Monthly Amortization</b></td><td><b>${peso(monthlyAmort)}</b></td></tr>
      `;
    }
  </script>
</body>
</html>
