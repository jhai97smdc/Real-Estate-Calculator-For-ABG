<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Real Estate Quotation Calculator</title>
<style>
  :root{
    --brand:#1a73e8;
    --ink:#1f2937;
    --muted:#6b7280;
    --line:#e5eaf0;
    --card:#ffffff;
    --soft:#f9fbfd;
    --hi:#e8f0fe;
  }
  *{box-sizing:border-box}
  body{font-family:Arial,Helvetica,sans-serif;background:var(--soft);color:var(--ink);margin:20px}
  h1{font-size:20px;margin:0 0 12px;color:var(--brand)}
  h2{font-size:16px;color:var(--brand);margin:24px 0 10px;border-bottom:2px solid var(--line);padding-bottom:4px}
  table{width:100%;border-collapse:collapse;background:var(--card);border:1px solid #dde3ea;border-radius:10px;overflow:hidden;margin-bottom:16px}
  th,td{padding:10px;border-bottom:1px solid #edf2f7;font-size:14px}
  th{background:#f3f6fb;text-align:left;font-weight:600}
  td.right{text-align:right}
  td.center{text-align:center}
  input[type="text"],input[type="number"]{
    width:100%;padding:8px;border:none;background:transparent;font-size:14px
  }
  input::placeholder{color:#a0aec0;opacity:.9}
  input:focus{outline:none;background:#f0f8ff}
  .radio-row{display:flex;gap:10px;margin:8px 0 14px;flex-wrap:wrap}
  .radio-row label{display:flex;align-items:center;gap:8px;padding:7px 12px;border:1px solid #cfd7e3;border-radius:18px;background:#ffffff;cursor:pointer;font-size:13px}
  .btn{background:var(--brand);color:#fff;border:none;border-radius:10px;padding:10px 16px;margin:8px 8px 16px 0;cursor:pointer;font-size:14px}
  .btn.secondary{background:#e2e8f0;color:#374151}
  .highlight{background:var(--hi);font-weight:700;color:#0f5bd6}
  .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:12px}
  .grid{display:grid;grid-template-columns:1fr;gap:14px}
  @media(min-width:880px){ .grid{grid-template-columns:1fr 1fr} }
  .section-card{padding:8px 0}
  .footer-note{color:var(--muted);font-size:12px;margin-top:6px}
</style>
</head>
<body>
  <h1>Real Estate Quotation Calculator</h1>

  <div class="grid">
    <div class="section-card">
      <h2>Project Details</h2>
      <table>
        <tr><th>Project Name</th><td><input id="projName" type="text" placeholder="e.g. South Residences"></td></tr>
        <tr><th>Unit Area (sqm)</th><td><input id="unitArea" type="number" step="0.01" placeholder="e.g. 36.53"></td></tr>
        <tr><th>View</th><td><input id="view" type="text" placeholder="e.g. Mall View"></td></tr>
        <tr><th>Unit</th><td><input id="unitCode" type="text" placeholder="e.g. B030916"></td></tr>
      </table>

      <h2>Pricing & Discounts</h2>
      <div class="footer-note">Discounts are applied <b>sequentially</b>: Standard → Special → Additional → Rebate.</div>
      <table>
        <tr><th>List Price (₱)</th><td><input id="listPrice" type="number" step="0.01" placeholder="e.g. 5532000"></td></tr>
        <tr><th>Other Charges (₱)</th><td><input id="otherCharges" type="number" step="0.01" placeholder="e.g. 300000"></td></tr>
        <tr><th>Standard Discount %</th><td><input id="disc1" type="number" step="0.0001" placeholder="e.g. 21"></td></tr>
        <tr><th>Special Discount %</th><td><input id="disc2" type="number" step="0.0001" placeholder="e.g. 5"></td></tr>
        <tr><th>Additional Discount %</th><td><input id="disc3" type="number" step="0.0001" placeholder="e.g. 1"></td></tr>
        <tr><th>Rebate Discount %</th><td><input id="disc4" type="number" step="0.0001" placeholder="e.g. 1.5"></td></tr>
      </table>

      <h2>Payment Term</h2>
      <div class="radio-row">
        <label><input type="radio" name="pt" value="spread" checked> Spread DP</label>
        <label><input type="radio" name="pt" value="spot"> Spot Downpayment</label>
        <label><input type="radio" name="pt" value="split"> Split (DP + Monthly)</label>
      </div>

      <!-- Spread DP -->
      <table id="spreadFields">
        <tr><th>Downpayment (Equity %)</th><td><input id="spreadEquityPct" type="number" step="0.0001" placeholder="e.g. 5"></td></tr>
        <tr><th>Reservation Fee</th><td><input id="spreadRF" type="number" step="0.01" placeholder="e.g. 30000"></td></tr>
        <tr><th>No. of Months</th><td><input id="spreadMonths" type="number" step="1" placeholder="e.g. 12"></td></tr>
      </table>

      <!-- Spot DP -->
      <table id="spotFields" style="display:none">
        <tr><th>Downpayment %</th><td><input id="spotPct" type="number" step="0.0001" placeholder="e.g. 5"></td></tr>
        <tr><th>Reservation Fee</th><td><input id="spotRF" type="number" step="0.01" placeholder="e.g. 30000"></td></tr>
      </table>

      <!-- Split DP -->
      <table id="splitFields" style="display:none">
        <tr><th>Spot Downpayment %</th><td><input id="splitSpotPct" type="number" step="0.0001" placeholder="e.g. 5"></td></tr>
        <tr><th>Reservation Fee</th><td><input id="splitRF" type="number" step="0.01" placeholder="e.g. 30000"></td></tr>
        <tr><th>Downpayment (Equity %)</th><td><input id="splitEquityPct" type="number" step="0.0001" placeholder="e.g. 5"></td></tr>
        <tr><th>No. of Months</th><td><input id="splitMonths" type="number" step="1" placeholder="e.g. 12"></td></tr>
      </table>

      <h2>Bank Financing</h2>
      <table>
        <tr><th>Interest Rate (per annum %)</th><td><input id="bankRate" type="number" step="0.0001" placeholder="e.g. 7"></td></tr>
      </table>

      <div>
        <button id="btnCompute" class="btn">Compute</button>
        <button id="btnPDF" class="btn secondary">Save as PDF</button>
      </div>
    </div>

    <div class="section-card">
      <h2>Quotation Summary</h2>
      <table>
        <thead>
          <tr><th class="center">%</th><th>Description</th><th class="right">Amount (₱)</th></tr>
        </thead>
        <tbody id="summaryBody">
          <tr><td></td><td>List Price</td><td id="sList" class="right"></td></tr>

          <!-- Individual discount rows -->
          <tr><td id="sDisc1Pct" class="center"></td><td>Standard Discount</td><td id="sDisc1Amt" class="right"></td></tr>
          <tr><td id="sDisc2Pct" class="center"></td><td>Special Discount</td><td id="sDisc2Amt" class="right"></td></tr>
          <tr><td id="sDisc3Pct" class="center"></td><td>Additional Discount</td><td id="sDisc3Amt" class="right"></td></tr>
          <tr><td id="sDisc4Pct" class="center"></td><td>Rebate Discount</td><td id="sDisc4Amt" class="right"></td></tr>

          <tr class="highlight"><td></td><td>Net List Price</td><td id="sNetList" class="right"></td></tr>
          <tr><td></td><td>Other Charges</td><td id="sOC" class="right"></td></tr>
          <tr><td></td><td id="sVATLabel">VAT</td><td id="sVAT" class="right"></td></tr>
          <tr class="highlight"><td></td><td>Total Amount Payable (TAP)</td><td id="sTAP" class="right"></td></tr>

          <!-- Spread -->
          <tr class="spread"><td id="sSpreadEqPct" class="center"></td><td>Downpayment (Equity)</td><td id="sSpreadEq" class="right"></td></tr>
          <tr class="spread"><td></td><td>Reservation Fee</td><td id="sSpreadRF" class="right"></td></tr>
          <tr class="spread"><td></td><td>Net Downpayment (Equity)</td><td id="sSpreadNet" class="right"></td></tr>
          <tr class="spread"><td id="sSpreadMonths" class="center"></td><td>No. of Months</td><td></td></tr>
          <tr class="spread"><td></td><td>Monthly Amortization</td><td id="sSpreadMonthly" class="right"></td></tr>

          <!-- Spot -->
          <tr class="spot" style="display:none"><td id="sSpotPct" class="center"></td><td>Downpayment</td><td id="sSpot" class="right"></td></tr>
          <tr class="spot" style="display:none"><td></td><td>Reservation Fee</td><td id="sSpotRF" class="right"></td></tr>
          <tr class="spot" style="display:none"><td></td><td>Net Downpayment</td><td id="sSpotNet" class="right"></td></tr>

          <!-- Split -->
          <tr class="split" style="display:none"><td id="sSplitSpotPct" class="center"></td><td>Spot Downpayment</td><td id="sSplitSpot" class="right"></td></tr>
          <tr class="split" style="display:none"><td></td><td>Reservation Fee</td><td id="sSplitRF" class="right"></td></tr>
          <tr class="split" style="display:none"><td></td><td>Net Downpayment</td><td id="sSplitNet" class="right"></td></tr>
          <tr class="split" style="display:none"><td id="sSplitEqPct" class="center"></td><td>Downpayment (Equity)</td><td id="sSplitEq" class="right"></td></tr>
          <tr class="split" style="display:none"><td id="sSplitMonths" class="center"></td><td>No. of Months</td><td></td></tr>
          <tr class="split" style="display:none"><td></td><td>Monthly Amortization</td><td id="sSplitMonthly" class="right"></td></tr>

          <tr class="highlight"><td></td><td>Remaining Balance</td><td id="sRemain" class="right"></td></tr>
          <tr class="highlight"><td></td><td>Loanable Amount (Bank)</td><td id="sLoanable" class="right"></td></tr>
          <tr><td>5y</td><td>Estimated Bank Amortization</td><td id="sBank5" class="right"></td></tr>
          <tr><td>10y</td><td>Estimated Bank Amortization</td><td id="sBank10" class="right"></td></tr>
          <tr><td>15y</td><td>Estimated Bank Amortization</td><td id="sBank15" class="right"></td></tr>
          <tr><td>20y</td><td>Estimated Bank Amortization</td><td id="sBank20" class="right"></td></tr>
        </tbody>
      </table>

      <h2>Property Consultant Details</h2>
      <table>
        <tr><th>Name</th><td><input id="agentName" type="text" placeholder="e.g. Juan Dela Cruz"></td></tr>
        <tr><th>Contact Number</th><td><input id="agentContact" type="text" placeholder="e.g. 0917 123 4567"></td></tr>
        <tr><th>Position</th><td><input id="agentRole" type="text" placeholder="e.g. Property Consultant"></td></tr>
      </table>
    </div>
  </div>

<script>
// ----- Helpers -----
const fmt = (x) => {
  if (!isFinite(x)) return '';
  return Number(x).toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
};
const val = (id) => {
  const el = document.getElementById(id);
  const v = parseFloat(el?.value);
  return isNaN(v) ? 0 : v;
};

// Toggle payment term UI + summary rows
function applyPT(selected){
  document.getElementById("spreadFields").style.display = selected==="spread"?"table":"none";
  document.getElementById("spotFields").style.display   = selected==="spot"?"table":"none";
  document.getElementById("splitFields").style.display  = selected==="split"?"table":"none";
  document.querySelectorAll(".spread").forEach(r=>r.style.display=selected==="spread"?"":"none");
  document.querySelectorAll(".spot").forEach(r=>r.style.display=selected==="spot"?"":"none");
  document.querySelectorAll(".split").forEach(r=>r.style.display=selected==="split"?"":"none");
}
document.querySelectorAll('input[name="pt"]').forEach(r=>r.addEventListener('change',e=>applyPT(e.target.value)));

// Main compute
function computeAll(){
  // 1) Base & discounts (sequential)
  const list = val('listPrice');
  const oc   = val('otherCharges');
  const d1 = val('disc1'), d2 = val('disc2'), d3 = val('disc3'), d4 = val('disc4');

  const disc1Amt = list * (d1/100);
  const after1   = list - disc1Amt;
  const disc2Amt = after1 * (d2/100);
  const after2   = after1 - disc2Amt;
  const disc3Amt = after2 * (d3/100);
  const after3   = after2 - disc3Amt;
  const disc4Amt = after3 * (d4/100);
  const netList  = after3 - disc4Amt;

  // VAT rule
  const vatExempt = netList <= 3600000 && netList > 0;
  const vat = vatExempt ? 0 : (netList * 0.12);
  document.getElementById('sVATLabel').textContent = vatExempt ? 'VAT (Exempt)' : 'VAT';

  // TAP
  const tap = netList + oc + vat;

  // 2) Payment term maths
  const pt = document.querySelector('input[name="pt"]:checked').value;
  let remain = tap;

  // Spread
  const spreadEqPct = val('spreadEquityPct');
  const spreadRF    = val('spreadRF');
  const spreadMonths= Math.max(1, parseInt(val('spreadMonths')) || 1);
  const spreadEq    = tap * (spreadEqPct/100);
  const spreadNet   = spreadEq - spreadRF;
  const spreadMonthly = spreadEq / spreadMonths;
  if (pt==='spread') remain = tap - spreadEq;

  // Spot
  const spotPct = val('spotPct');
  const spotRF  = val('spotRF');
  const spotDP  = tap * (spotPct/100);
  const spotNet = spotDP - spotRF;
  if (pt==='spot') remain = tap - spotDP;

  // Split
  const splitSpotPct = val('splitSpotPct');
  const splitRF      = val('splitRF');
  const splitEqPct   = val('splitEquityPct');
  const splitMonths  = Math.max(1, parseInt(val('splitMonths')) || 1);
  const splitSpot    = tap * (splitSpotPct/100);
  const splitNet     = splitSpot - splitRF;
  const splitEq      = tap * (splitEqPct/100);
  const splitMonthly = splitEq / splitMonths;
  if (pt==='split') remain = tap - (splitSpot + splitEq);

  // 3) Bank amortization
  const rate = val('bankRate')/100/12; // monthly
  const loanable = remain;
  function pmt(P, i, n){ if(!P||!i||!n) return 0; return P*i / (1 - Math.pow(1+i, -n)); }
  const bank5  = pmt(loanable, rate,  5*12);
  const bank10 = pmt(loanable, rate, 10*12);
  const bank15 = pmt(loanable, rate, 15*12);
  const bank20 = pmt(loanable, rate, 20*12);

  // 4) Fill summary (3 columns: % | Description | Amount)
  document.getElementById('sList').textContent = fmt(list);

  document.getElementById('sDisc1Pct').textContent = d1 ? (d1 + '%') : '';
  document.getElementById('sDisc1Amt').textContent = fmt(disc1Amt);
  document.getElementById('sDisc2Pct').textContent = d2 ? (d2 + '%') : '';
  document.getElementById('sDisc2Amt').textContent = fmt(disc2Amt);
  document.getElementById('sDisc3Pct').textContent = d3 ? (d3 + '%') : '';
  document.getElementById('sDisc3Amt').textContent = fmt(disc3Amt);
  document.getElementById('sDisc4Pct').textContent = d4 ? (d4 + '%') : '';
  document.getElementById('sDisc4Amt').textContent = fmt(disc4Amt);

  document.getElementById('sNetList').textContent = fmt(netList);
  document.getElementById('sOC').textContent      = fmt(oc);
  document.getElementById('sVAT').textContent     = fmt(vat);
  document.getElementById('sTAP').textContent     = fmt(tap);

  // Spread rows
  document.getElementById('sSpreadEqPct').textContent = spreadEqPct ? (spreadEqPct + '%') : '';
  document.getElementById('sSpreadEq').textContent    = fmt(spreadEq);
  document.getElementById('sSpreadRF').textContent    = fmt(spreadRF);
  document.getElementById('sSpreadNet').textContent   = fmt(spreadNet);
  document.getElementById('sSpreadMonths').textContent= spreadMonths || '';
  document.getElementById('sSpreadMonthly').textContent= fmt(spreadMonthly);

  // Spot rows
  document.getElementById('sSpotPct').textContent = spotPct ? (spotPct + '%') : '';
  document.getElementById('sSpot').textContent    = fmt(spotDP);
  document.getElementById('sSpotRF').textContent  = fmt(spotRF);
  document.getElementById('sSpotNet').textContent = fmt(spotNet);

  // Split rows
  document.getElementById('sSplitSpotPct').textContent = splitSpotPct ? (splitSpotPct + '%') : '';
  document.getElementById('sSplitSpot').textContent    = fmt(splitSpot);
  document.getElementById('sSplitRF').textContent      = fmt(splitRF);
  document.getElementById('sSplitNet').textContent     = fmt(splitNet);
  document.getElementById('sSplitEqPct').textContent   = splitEqPct ? (splitEqPct + '%') : '';
  document.getElementById('sSplitEq').textContent      = fmt(splitEq);
  document.getElementById('sSplitMonths').textContent  = splitMonths || '';
  document.getElementById('sSplitMonthly').textContent = fmt(splitMonthly);

  // Remaining + Loanable + Bank
  document.getElementById('sRemain').textContent   = fmt(remain);
  document.getElementById('sLoanable').textContent = fmt(loanable);
  document.getElementById('sBank5').textContent    = fmt(bank5);
  document.getElementById('sBank10').textContent   = fmt(bank10);
  document.getElementById('sBank15').textContent   = fmt(bank15);
  document.getElementById('sBank20').textContent   = fmt(bank20);
}

// Save as PDF (print)
document.getElementById('btnPDF').addEventListener('click', ()=> window.print());
document.getElementById('btnCompute').addEventListener('click', computeAll);

// Initialize visibility on load
applyPT(document.querySelector('input[name="pt"]:checked').value);
</script>

</body>
</html>
